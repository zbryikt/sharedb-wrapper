!function(){var n,t,e={exports:{}};n=function(n,t,e){return null==e&&(e=!0),json0OtDiff(n,t,e?diffMatchPatch:null)},(t=function(n){var t;return t=n.url,this.socket=new WebSocket(("http"===t.scheme?"ws":"wss")+"://"+t.domain+"/ws"),this.connection=new sharedb.Connection(this.socket),this}).prototype=function(n,t){var e={}.hasOwnProperty;for(var r in t){e.call(t,r)&&(n[r]=t[r])}return n}(Object.create(Object.prototype),{json:{diff:function(t,e,r){return null==r&&(r=!0),n(t,e,r)}},get:function(n){var t,e,r,o=this;return t=n.id,e=n.watch,r=n.create,new Promise(function(n,c){var i;return(i=o.connection.get("doc",t)).fetch(function(t){if(i.subscribe(function(t,e){return n(i)}),null!=e&&i.on("op",function(n,t){return e(n,t)}),!i.type){return i.create((r?r():null)||{})}})})}}),null!==e&&(e.exports=t),"undefined"!=typeof window&&null!==window&&(window.sharedbWrapper=t),e=e.exports}();
