require=function(i){function t(e,n){return t.m.hasOwnProperty(e)?t.m[e]:"function"!=typeof i||n?"function"==typeof t.r?t.r(e,1):void 0:i(e,1)}t.m={},t.r=i;function r(e,n,i){return e.slice(0,n)+i+e.slice(n)}function o(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")}function p(e){for(var n=0;n<e.length;n++)o(e[n])}function d(e,n,i){return null!=n.i?n.p<e||n.p===e&&i?e+n.i.length:e:e<=n.p?e:e<=n.p+n.d.length?n.p:e-n.d.length}function h(e){return"[object Array]"==Object.prototype.toString.call(e)}function v(e){return JSON.parse(JSON.stringify(e))}var e,n=function(e,v,g,m){var w=e.transformX=function(e,n){g(e),g(n);for(var i,t=[],l=0;l<n.length;l++){for(var r=n[l],o=[],p=0;p<e.length;){var d=[],f=e[p],u=d;if(v(o,f,i=r,"left"),v(u,i,f,"right"),p++,1!==d.length){if(0===d.length){for(var s=p;s<e.length;s++)m(o,e[s]);r=null;break}for(var a=w(e.slice(p),d),c=0;c<a[0].length;c++)m(o,a[0][c]);for(var h=0;h<a[1].length;h++)m(t,a[1][h]);r=null;break}r=d[0]}null!=r&&m(t,r),e=o}return[e,t]};e.transform=function(e,n,i){if("left"!==i&&"right"!==i)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?v([],e[0],n[0],i):"left"===i?w(e,n)[0]:w(n,e)[1]}},l=e={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},f=(l.apply=function(e,n){var i;p(n);for(var t=0;t<n.length;t++){var l=n[t];if(null!=l.i)e=r(e,l.p,l.i);else{if(i=e.slice(l.p,l.p+l.d.length),l.d!==i)throw new Error("Delete component '"+l.d+"' does not match deleted text '"+i+"'");e=e.slice(0,l.p)+e.slice(l.p+l.d.length)}}return e},l._append=function(e,n){var i;""!==n.i&&""!==n.d&&(0===e.length?e.push(n):null!=(i=e[e.length-1]).i&&null!=n.i&&i.p<=n.p&&n.p<=i.p+i.i.length?e[e.length-1]={i:r(i.i,n.p-i.p,n.i),p:i.p}:null!=i.d&&null!=n.d&&n.p<=i.p&&i.p<=n.p+n.d.length?e[e.length-1]={d:r(n.d,i.p-n.p,i.d),p:n.p}:e.push(n))}),u=(l.compose=function(e,n){p(e),p(n);for(var i=e.slice(),t=0;t<n.length;t++)f(i,n[t]);return i},l.normalize=function(e){var n=[];null==e.i&&null==e.p||(e=[e]);for(var i=0;i<e.length;i++){var t=e[i];null==t.p&&(t.p=0),f(n,t)}return n},l.transformCursor=function(e,n,i){for(var t="right"===i,l=0;l<n.length;l++)e=d(e,n[l],t);return e},l._tc=function(e,n,i,t){if(o(n),o(i),null!=n.i)f(e,{i:n.i,p:d(n.p,i,"right"===t)});else if(null!=i.i){t=n.d;n.p<i.p&&(f(e,{d:t.slice(0,i.p-n.p),p:n.p}),t=t.slice(i.p-n.p)),""!==t&&f(e,{d:t,p:n.p+i.i.length})}else if(n.p>=i.p+i.d.length)f(e,{d:n.d,p:n.p-i.d.length});else if(n.p+n.d.length<=i.p)f(e,n);else{var t={d:"",p:n.p},l=(n.p<i.p&&(t.d=n.d.slice(0,i.p-n.p)),n.p+n.d.length>i.p+i.d.length&&(t.d+=n.d.slice(i.p+i.d.length-n.p)),Math.max(n.p,i.p)),r=Math.min(n.p+n.d.length,i.p+i.d.length);if(n.d.slice(l-n.p,r-n.p)!==i.d.slice(l-i.p,r-i.p))throw new Error("Delete ops delete different text in the same region of the document");""!==t.d&&(t.p=d(t.p,i),f(e,t))}return e}),g=(l.invert=function(e){e=e.slice().reverse();for(var n,i=0;i<e.length;i++)e[i]=null!=(n=e[i]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};return e},n(l,u,p,f),{name:"json0",uri:"http://sharejs.org/types/JSONv0"}),m={};function w(e){e.t="text0";var n={p:e.p.pop()};null!=e.si&&(n.i=e.si),null!=e.sd&&(n.d=e.sd),e.o=[n]}function y(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}g.registerSubtype=function(e){m[e.name]=e},g.create=function(e){return void 0===e?null:v(e)},g.invertComponent=function(e){var n={p:e.p};return e.t&&m[e.t]&&(n.t=e.t,n.o=m[e.t].invert(e.o)),void 0!==e.si&&(n.sd=e.si),void 0!==e.sd&&(n.si=e.sd),void 0!==e.oi&&(n.od=e.oi),void 0!==e.od&&(n.oi=e.od),void 0!==e.li&&(n.ld=e.li),void 0!==e.ld&&(n.li=e.ld),void 0!==e.na&&(n.na=-e.na),void 0!==e.lm&&(n.lm=e.p[e.p.length-1],n.p=e.p.slice(0,e.p.length-1).concat([e.lm])),n},g.invert=function(e){for(var n=e.slice().reverse(),i=[],t=0;t<n.length;t++)i.push(g.invertComponent(n[t]));return i},g.checkValidOp=function(e){for(var n=0;n<e.length;n++)if(!h(e[n].p))throw new Error("Missing path")},g.checkList=function(e){if(!h(e))throw new Error("Referenced element not a list")},g.checkObj=function(e){if(!(n=e)||n.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var n},g.apply=function(e,n){g.checkValidOp(n),n=v(n);for(var i={data:e},t=0;t<n.length;t++){var l=n[t];null==l.si&&null==l.sd||w(l);for(var r,o=i,p="data",d=0;d<l.p.length;d++){var f=l.p[d],u=o,o=o[p],p=f;if(null==u)throw new Error("Path invalid")}if(l.t&&void 0!==l.o&&m[l.t])o[p]=m[l.t].apply(o[p],l.o);else if(void 0!==l.na){if("number"!=typeof o[p])throw new Error("Referenced element not a number");o[p]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)g.checkList(o),o[p]=l.li;else if(void 0!==l.li)g.checkList(o),o.splice(p,0,l.li);else if(void 0!==l.ld)g.checkList(o),o.splice(p,1);else if(void 0!==l.lm)g.checkList(o),l.lm!=p&&(r=o[p],o.splice(p,1),o.splice(l.lm,0,r));else if(void 0!==l.oi)g.checkObj(o),o[p]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");g.checkObj(o),delete o[p]}}return i.data},g.shatter=function(e){for(var n=[],i=0;i<e.length;i++)n.push([e[i]]);return n},g.incrementalApply=function(e,n,i){for(var t=0;t<n.length;t++){var l=[n[t]];i(l,e=g.apply(e,l))}return e};var s=g.pathMatches=function(e,n,i){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t]&&(!i||t!==e.length-1))return!1;return!0};return g.append=function(e,n){if(n=v(n),0!==e.length){var i=e[e.length-1];if(null==n.si&&null==n.sd||null==i.si&&null==i.sd||(w(n),w(i)),s(n.p,i.p))if(n.t&&i.t&&n.t===i.t&&m[n.t]){if(i.o=m[n.t].compose(i.o,n.o),null!=n.si||null!=n.sd){for(var t=n.p,l=0;l<i.o.length-1;l++)n.o=[i.o.pop()],n.p=t.slice(),y(n),e.push(n);y(i)}}else null!=i.na&&null!=n.na?e[e.length-1]={p:i.p,na:i.na+n.na}:void 0!==i.li&&void 0===n.li&&n.ld===i.li?void 0!==i.ld?delete i.li:e.pop():void 0!==i.od&&void 0===i.oi&&void 0!==n.oi&&void 0===n.od?i.oi=n.oi:void 0!==i.oi&&void 0!==n.od?void 0!==n.oi?i.oi=n.oi:void 0!==i.od?delete i.oi:e.pop():void 0!==n.lm&&n.p[n.p.length-1]===n.lm||e.push(n);else null==n.si&&null==n.sd||null==i.si&&null==i.sd||(y(n),y(i)),e.push(n)}else e.push(n)},g.compose=function(e,n){g.checkValidOp(e),g.checkValidOp(n);for(var i=v(e),t=0;t<n.length;t++)g.append(i,n[t]);return i},g.normalize=function(e){var n=[];e=h(e)?e:[e];for(var i=0;i<e.length;i++){var t=e[i];null==t.p&&(t.p=[]),g.append(n,t)}return n},g.commonLengthForOps=function(e,n){var i=e.p.length,t=n.p.length;if(null==e.na&&!e.t||i++,null==n.na&&!n.t||t++,0===i)return-1;if(0===t)return null;i--,t--;for(var l=0;l<i;l++){var r=e.p[l];if(t<=l||r!==n.p[l])return null}return i},g.canOpAffectPath=function(e,n){return null!=g.commonLengthForOps({p:n},e)},g.transformComponent=function(e,n,i,t){n=v(n);var l=g.commonLengthForOps(i,n),r=g.commonLengthForOps(n,i),o=n.p.length,p=i.p.length;if(null==n.na&&!n.t||o++,null==i.na&&!i.t||p++,null!=r&&o<p&&n.p[r]==i.p[r]&&(void 0!==n.ld?((d=v(i)).p=d.p.slice(o),n.ld=g.apply(v(n.ld),[d])):void 0!==n.od&&((d=v(i)).p=d.p.slice(o),n.od=g.apply(v(n.od),[d]))),null!=l){var r=o==p,d=i;if(null==n.si&&null==n.sd||null==i.si&&null==i.sd||(w(n),w(d=v(i))),d.t&&m[d.t]){if(n.t&&n.t===d.t){var f=m[n.t].transform(n.o,d.o,t);if(null!=n.si||null!=n.sd)for(var u=n.p,s=0;s<f.length;s++)n.o=[f[s]],n.p=u.slice(),y(n),g.append(e,n);else(!h(f)||0<f.length)&&(n.o=f,g.append(e,n));return e}}else if(void 0===i.na)if(void 0!==i.li&&void 0!==i.ld){if(i.p[l]===n.p[l]){if(!r)return e;if(void 0!==n.ld){if(void 0===n.li||"left"!==t)return e;n.ld=v(i.li)}}}else if(void 0!==i.li)void 0!==n.li&&void 0===n.ld&&r&&n.p[l]===i.p[l]?"right"===t&&n.p[l]++:i.p[l]<=n.p[l]&&n.p[l]++,void 0!==n.lm&&r&&i.p[l]<=n.lm&&n.lm++;else if(void 0!==i.ld){if(void 0!==n.lm&&r){if(i.p[l]===n.p[l])return e;var u=i.p[l],a=n.p[l];(u<(c=n.lm)||u===c&&a<c)&&n.lm--}if(i.p[l]<n.p[l])n.p[l]--;else if(i.p[l]===n.p[l]){if(p<o)return e;if(void 0!==n.ld){if(void 0===n.li)return e;delete n.ld}}}else if(void 0!==i.lm)if(void 0!==n.lm&&o===p){var a=n.p[l],c=n.lm,d=i.p[l],o=i.lm;if(d!==o)if(a===d){if("left"!==t)return e;n.p[l]=o,a===c&&(n.lm=o)}else d<a&&n.p[l]--,o<a?n.p[l]++:a===o&&o<d&&(n.p[l]++,a===c&&n.lm++),(d<c||c===d&&a<c)&&n.lm--,o<c?n.lm++:c===o&&(d<o&&a<c||o<d&&c<a?"right"===t&&n.lm++:a<c?n.lm++:c===d&&n.lm--)}else void 0!==n.li&&void 0===n.ld&&r?(a=i.p[l],c=i.lm,(u=n.p[l])>a&&n.p[l]--,c<u&&n.p[l]++):(a=i.p[l],c=i.lm,(u=n.p[l])===a?n.p[l]=c:(a<u&&n.p[l]--,(c<u||u===c&&c<a)&&n.p[l]++));else if(void 0!==i.oi&&void 0!==i.od){if(n.p[l]===i.p[l]){if(void 0===n.oi||!r)return e;if("right"===t)return e;n.od=i.oi}}else if(void 0!==i.oi){if(void 0!==n.oi&&n.p[l]===i.p[l]){if("left"!==t)return e;g.append(e,{p:n.p,od:i.oi})}}else if(void 0!==i.od&&n.p[l]==i.p[l]){if(!r)return e;if(void 0===n.oi)return e;delete n.od}}return g.append(e,n),e},n(g,g.transformComponent,g.checkValidOp,g.append),g.registerSubtype(e),t.m["ot-json0"]={type:g},t}("function"==typeof require?require:void 0);
