// Generated by LiveScript 1.3.1
(function(){
  var local, click, textarea, btn, sdb, watch;
  local = {};
  click = function(){
    var data, old, ops;
    data = local.doc.data;
    old = JSON.parse(JSON.stringify(data));
    (data.x || (data.x = {})).a = ((data.x || (data.x = {})).a || 0) + 1;
    ops = json0OtDiff(old, data);
    return local.doc.submitOp(ops);
  };
  textarea = ld$.find(document, 'textarea', 0);
  btn = ld$.find(document, '.btn')[0];
  btn.addEventListener('click', click);
  sdb = new sharedbWrapper({
    url: {
      scheme: 'http',
      domain: 'localhost:3005'
    }
  });
  watch = function(){
    return textarea.value = JSON.stringify(local.doc.data);
  };
  sdb.get({
    id: 'sample',
    watch: watch
  }).then(function(doc){
    local.doc = doc;
    return watch();
  });
  return textarea.onchange = function(){
    return console.log(textarea.value);
  };
})();